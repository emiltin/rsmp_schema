{
  "allOf" : [
    {
      "description" : "Controller switched on.\nThe controller is active and is not in dark mode.\nUsed to determine if the controller is operating, e.g. it shows red, green or yellow to the vehicles.\nDuring maintenance work the controller might be using dark mode (no output to the signal heads).",
      "properties" : {
        "n" : {
          "enum" : [
            "intersection",
            "source",
            "status"
          ]
        }
      }
    },
    {
      "if" : {
        "required" : [
          "n"
        ],
        "properties" : {
          "n" : {
            "const" : "intersection"
          }
        }
      },
      "then" : {
        "properties" : {
          "s" : {
            "allOf" : [
              {
                "description" : "Comma separated list of intersections which the status relates to, e.g. “1,2”.\nUse “0” for all intersections of the TLC."
              },
              {
                "$ref" : "../../../core/3.1.2/definitions.json#/integer_list"
              }
            ]
          }
        }
      }
    },
    {
      "if" : {
        "required" : [
          "n"
        ],
        "properties" : {
          "n" : {
            "const" : "status"
          }
        }
      },
      "then" : {
        "properties" : {
          "s" : {
            "allOf" : [
              {
                "description" : "False: Traffic Light Controller in dark mode\nTrue: Traffic Light Controller not in dark mode"
              },
              {
                "$ref" : "../../../core/3.1.2/definitions.json#/boolean_list"
              }
            ]
          }
        }
      }
    },
    {
      "if" : {
        "required" : [
          "n"
        ],
        "properties" : {
          "n" : {
            "const" : "source"
          }
        }
      },
      "then" : {
        "properties" : {
          "s" : {
            "allOf" : [
              {
                "description" : "Source of the status change",
                "pattern" : "(?-mix:^(operator_panel|calendar_clock|control_block|forced|startup|other)(?:,(operator_panel|calendar_clock|control_block|forced|startup|other))*$)"
              },
              {
                "$ref" : "../../../core/3.1.2/definitions.json#/string_list"
              }
            ]
          }
        }
      }
    }
  ]
}
